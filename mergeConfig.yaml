mixed-port: 7890
allow-lan: true
bind-address: '*'
mode: rule
log-level: info
external-controller: '127.0.0.1:9090'

dns:
  enabled: true
  listen: '127.0.0.1:3653'
  ipv6: true
  enhanced-mode: redir-host
  nameserver: [8.8.8.8, 8.8.4.4, 1.1.1.1, 208.67.222.222]
  use-hosts: true
  hosts: { mtalk.google.com: [142.251.170.188, 108.177.125.188], alt1-mtalk.google.com: 192.178.164.188, alt2-mtalk.google.com: 192.178.164.188, alt3-mtalk.google.com: 192.178.164.188, alt4-mtalk.google.com: 192.178.164.188, alt5-mtalk.google.com: 192.178.164.188, alt6-mtalk.google.com: 192.178.164.188, alt7-mtalk.google.com: 192.178.164.188, alt8-mtalk.google.com: 192.178.131.188 }

profile:
  store-selected: true
  store-fake-ip: true
  proxy-groups-mode: true

proxies:

proxy-providers:
  sub1:
    type: http
    url: "https://long-morning-d1bb.wowoo74110.workers.dev/86c50e3a-5b87-49dd-bd20-03c7f2735e40/cl"
    interval: 86400
    path: ./providers/sub1.yaml
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300

  sub2:
    type: http
    url: "https://xship.top/v1/subscribe?starlink=SSYI1sE1b_KXI4PALsNsuyqQ"
    interval: 86400
    path: ./providers/sub2.yaml
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300
  
  # sub3:
  #   type: http
  #   # url: "https://slimy-janine-lirtpass-0136632c.koyeb.app/share/sub/dingyue_Center_home-isp?token=oBE-Y90S7nSyNkpKqKsT3"
  #   url: "http://slimy-janine-lirtpass-0136632c.koyeb.app/share/sub/dingyue_Center_post0905?token=B8jTZtcVAygnioiF9d125"
  #   interval: 86400
  #   path: ./providers/sub3.yaml
  #   health-check:
  #     enable: true
  #     url: http://www.gstatic.com/generate_204
  #     interval: 300
      
  sub4:
    type: http
    # url: "https://slimy-janine-lirtpass-0136632c.koyeb.app/share/sub/dingyue_Center_zijian-auto?token=Ujl3hLbG6Ef2ZsbMy_cLI"
    url: "https://sub.dmit.dpdns.org/share/sub/dingyue_Center_zijian_auto?token=xgy1nCsG7xgerdecv4QRn"
    interval: 86400
    path: ./providers/sub4.yaml
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300
      
  sub5:
    type: http
    url: "https://raw.githubusercontent.com/iphoneten/api/refs/heads/main/config.yaml"
    interval: 86400
    path: ./providers/sub5.yaml
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300
    
rule-providers:
  AntiAd:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/privacy-protection-tools/anti-AD/master/anti-ad-clash.yaml"
    path: ./ruleset/AntiAd.yaml
    interval: 86400

  banAD:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/refs/heads/master/Clash/Providers/BanAD.yaml"
    path: ./ruleset/BanAD.yaml
    interval: 86400

  adblockmihomo:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/217heidai/adblockfilters/main/rules/adblockmihomo.yaml"
    path: ./ruleset/adblockmihomo.yaml
    interval: 86400

  AD:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/earoftoast/clash-rules/main/AD.yaml"
    path: ./ruleset/AD.yaml
    interval: 86400

  EasyList:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/earoftoast/clash-rules/main/EasyList.yaml"
    path: ./ruleset/EasyList.yaml
    interval: 86400

  EasyListChina:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/earoftoast/clash-rules/main/EasyListChina.yaml"
    path: ./ruleset/EasyListChina.yaml
    interval: 86400

  EasyPrivacy:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/earoftoast/clash-rules/main/EasyPrivacy.yaml"
    path: ./ruleset/EasyPrivacy.yaml
    interval: 86400

  ProgramAD:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/earoftoast/clash-rules/main/ProgramAD.yaml"
    path: ./ruleset/ProgramAD.yaml
    interval: 86400

  adblock_loyal:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.txt"
    path: ./ruleset/adblock_loyal.yaml
    interval: 86400
    
proxy-groups:
  - name: è´Ÿè½½å‡è¡¡
    type: load-balance
    use: [sub2, sub1, sub4, sub5]
    interval: 3000
    strategy: round-robin # è½®è¯¢æ–¹å¼ï¼Œå¯é€‰ 'consistent-hashing' 'round-robin'
    url: 'https://www.google.com/generate_204'
    max-failed-times: 3
    timeout: 5000 
    filter: ^(?!.*(å‰©ä½™æµé‡|å¥—é¤åˆ°æœŸ|è·ç¦»ä¸‹æ¬¡|æœ¬ç«™|å…³æ³¨|æµ·å¤–|å®˜ç½‘|ç¾¤ç»„|ğŸ”’|å…è´¹|æ¨å¹¿)).*$

  - name: è‡ªåŠ¨é€‰æ‹©
    type: url-test
    use: [sub2, sub1, sub4, sub5]
    interval: 3000
    url: 'https://www.google.com/generate_204'
    max-failed-times: 3
    timeout: 5000 
    filter: ^(?!.*(å‰©ä½™æµé‡|å¥—é¤åˆ°æœŸ|è·ç¦»ä¸‹æ¬¡|æœ¬ç«™|å…³æ³¨|æµ·å¤–|å®˜ç½‘|ç¾¤ç»„|ğŸ”’|å…è´¹|æ¨å¹¿)).*$

  - name: èŠ‚ç‚¹é€‰æ‹©
    type: select
    proxies:
      - è‡ªåŠ¨é€‰æ‹©
      - è´Ÿè½½å‡è¡¡
    use: [sub2, sub1, sub4, sub5]
    url: 'https://www.google.com/generate_204'
    timeout: 5000
    filter: ^(?!.*(å‰©ä½™æµé‡|å¥—é¤åˆ°æœŸ|è·ç¦»ä¸‹æ¬¡|æœ¬ç«™|å…³æ³¨|æµ·å¤–|å®˜ç½‘|ç¾¤ç»„|ğŸ”’|å…è´¹|æ¨å¹¿)).*$

  # - name: åª’ä½“è‡ªåŠ¨é€‰æ‹©
  #   type: url-test
  #   use: [sub1, sub2]
  #   url: http://www.gstatic.com/generate_204
  #   interval: 300
  #   filter: ^(?!.*(å‰©ä½™æµé‡|å¥—é¤åˆ°æœŸ|è·ç¦»ä¸‹æ¬¡|æœ¬ç«™|å…³æ³¨|æµ·å¤–|å®˜ç½‘|ç¾¤ç»„)).*$

  # - name: åª’ä½“ä¸“çº¿
  #   type: select
  #   proxies:
  #     - åª’ä½“è‡ªåŠ¨é€‰æ‹©
  #   use: [sub1, sub2, sub3]
  #   filter: ^(?!.*(å‰©ä½™æµé‡|å¥—é¤åˆ°æœŸ|è·ç¦»ä¸‹æ¬¡|æœ¬ç«™|å…³æ³¨|æµ·å¤–|å®˜ç½‘|ç¾¤ç»„)).*$

  # - name: AIè‡ªåŠ¨æµ‹é€Ÿ
  #   type: url-test
  #   use: [sub1, sub2]
  #   url: http://www.gstatic.com/generate_204
  #   interval: 300
  #   filter: ^(?!.*(å‰©ä½™æµé‡|å¥—é¤åˆ°æœŸ|è·ç¦»ä¸‹æ¬¡|æœ¬ç«™|å…³æ³¨|æµ·å¤–|å®˜ç½‘|ç¾¤ç»„|é¦™æ¸¯)).*$

  # - name: AIä¸“çº¿
  #   type: select
  #   proxies: [AIè‡ªåŠ¨æµ‹é€Ÿ]
  #   use: [sub1, sub2, sub3]
  #   filter: ^(?!.*(å‰©ä½™æµé‡|å¥—é¤åˆ°æœŸ|è·ç¦»ä¸‹æ¬¡|æœ¬ç«™|å…³æ³¨|æµ·å¤–|å®˜ç½‘|ç¾¤ç»„)).*$

rules:
  - RULE-SET,AD,REJECT
  - RULE-SET,adblockmihomo,REJECT
  - RULE-SET,EasyList,REJECT
  - RULE-SET,EasyListChina,REJECT
  - RULE-SET,EasyPrivacy,REJECT
  - RULE-SET,ProgramAD,REJECT
  - RULE-SET,adblock_loyal,REJECT
  - RULE-SET,banAD,REJECT
  - RULE-SET,AntiAd,REJECT

  # - RULE-SET,AI,AIä¸“çº¿
  # - DOMAIN-SUFFIX,chat.openai.com,AIä¸“çº¿
  # - DOMAIN-SUFFIX,api.openai.com,AIä¸“çº¿
  # - DOMAIN-SUFFIX,openai.com,AIä¸“çº¿

  # - DOMAIN-SUFFIX,netflix.com,åª’ä½“ä¸“çº¿
  # - DOMAIN-SUFFIX,youtube.com,åª’ä½“ä¸“çº¿
  # - DOMAIN-SUFFIX,youtu.be,åª’ä½“ä¸“çº¿
  # - DOMAIN-SUFFIX,disneyplus.com,åª’ä½“ä¸“çº¿
  # - DOMAIN-SUFFIX,spotify.com,åª’ä½“ä¸“çº¿
  # - DOMAIN-SUFFIX,hulu.com,åª’ä½“ä¸“çº¿
  # - DOMAIN-SUFFIX,twitch.tv,åª’ä½“ä¸“çº¿
  # - DOMAIN-SUFFIX,amazonvideo.com,åª’ä½“ä¸“çº¿
  # - DOMAIN-SUFFIX,music.youtube.com,åª’ä½“ä¸“çº¿

  # - DOMAIN-SUFFIX,google.com,èŠ‚ç‚¹é€‰æ‹©
  # - DOMAIN-SUFFIX,twitter.com,èŠ‚ç‚¹é€‰æ‹©
  # - DOMAIN-SUFFIX,facebook.com,èŠ‚ç‚¹é€‰æ‹©

  # æ–°å¢çš„ç›´è¿è§„åˆ™
  - DOMAIN-SUFFIX,pages.dev,DIRECT
  
  - DOMAIN-SUFFIX,local,DIRECT
  - IP-CIDR,127.0.0.0/8,DIRECT
  - IP-CIDR,172.16.0.0/12,DIRECT
  - IP-CIDR,192.168.0.0/16,DIRECT
  - IP-CIDR,10.0.0.0/8,DIRECT
  - IP-CIDR,17.0.0.0/8,DIRECT
  - IP-CIDR,100.64.0.0/10,DIRECT
  - IP-CIDR,224.0.0.0/4,DIRECT
  - IP-CIDR6,fe80::/10,DIRECT
  - DOMAIN-SUFFIX,cn,DIRECT
  - DOMAIN-KEYWORD,-cn,DIRECT
  - GEOIP,LAN,DIRECT
  - GEOIP,CN,DIRECT
  - MATCH,èŠ‚ç‚¹é€‰æ‹©
